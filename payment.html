<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment Gateway</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="//code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</head>

<body>
    <div class="smPayCard  p-3">
        <div class="alert alert-success alert-dismissible d-none" id="alert">
            <a href="#" class="close" data-dismiss='alert' aria-label="close">&times;</a>
            <strong>Payment Approved</strong> You will now be redirected back to WEB-MART in <strong
                id="countDwn"></strong><a href="#" class="alert-link"> or click here to go to your order page</a>
        </div>
        <div class="card mx-auto shadow-lg m-5 payCard">
            <div class="card-header bg-dark p-2">
                <div class="float-left">
                    <a class="mytxt font-weight-bolder h4 logotxt" href="index.html">WEB-MART</a>
                </div>
                <div class="float-right w-50 text-white text-right" id="buyerNameNPrice">
                    <p id="payerId">User </p> <span class="text-success" id="payAmount" ></span>
                </div>
            </div>
            <div class="card-body">
                <div class="mx-auto text-center mb-3">
                    <span class="font-weight-bold">Enter your card details here</span>
                </div>
                <div class="container mx-auto pb-3">
                    <input type="text" class="form-control" placeholder="0000 0000 0000 0000" id="snInp">
                    <input type="text" class="form-control w-25 mt-3 d-inline" placeholder="MM/YY" id="yearInp">
                    <input type="text" class="form-control w-25 mt-3 d-inline" placeholder="CVV" id="cvvInp">
                    <button class="btn mybg d-block mt-3 form-control text-white font-weight-bold" id="payBtn">Pay <span
                            id="payBtnAmount"></span></button>
                </div>
            </div>
            <div class="card-footer bg-dark">
                <img src="images/visamastercard.jpg" class="w-100" alt="" style="height: 50px !important;">
            </div>

        </div>

    </div>


    <script>
        (function ($) {
            let b;
            let totalPrice = 0;
            let { log } = console;
            let cost;
            if (localStorage.getItem('user')) {

            }
            let payerId = JSON.parse(localStorage.getItem('user'));
            log(payerId)
            $('#payerId').html(payerId.userId)
            let orderObj = JSON.parse(localStorage.getItem('orderedItems'));

            if (localStorage.getItem('orderedItems')) {
            }
            let addComma = (val) => {
                b = val.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
            }
            for (let i = 0; i < orderObj.length; i++) {
                let price = orderObj[i].itemPrice;
                // let myPrice = price.slice(1,price.length);
                myPrice = price.replace(/₦/g, '');
                myPrice = parseFloat(myPrice.replace(/,/g, ''));
                totalPrice += myPrice;
                addComma(totalPrice);
            }
            cost = b;
            $('#payAmount').html(`Pay NGN${cost}`);
            $('#payBtnAmount').html(`₦${cost}`);
        })(jQuery);
    </script>
    <script src="main.js"></script>
</body>

</html>